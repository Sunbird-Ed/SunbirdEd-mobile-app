<ion-content *ngIf="project" class="ion-padding">
  <div class="project-segments segment-wrapper">
    <ion-segment [(ngModel)]="type" (ionChange)="segmentChanged($event)" class="segment-card">
      <div *ngFor="let tab of tabs;let i=index; let last = last" class="segments">
        <ion-segment-button value="{{tab.type}}">
          <ion-label>{{tab.name | translate}}</ion-label>
        </ion-segment-button>
        <div class="partition" *ngIf="!last">
        </div>
      </div>
    </ion-segment>
  </div>

  <div *ngIf="type == 'image/jpeg'">
    <app-item-list-header *ngIf="attachments?.project?.attachments?.length"
      headerLabel="{{'FRMELEMNTS_LBL_PROJECT_LEVEL' | translate}} {{'FRMELEMNTS_LBL_EVIDENCE' | translate | lowercase}}"
      class="header">
    </app-item-list-header>
    <app-attachment-card *ngIf="attachments?.project" [data]="attachments?.project" [viewOnly]="viewOnly"
      (deleteAttachment)="deleteImage($event)">
    </app-attachment-card>
    <app-item-list-header *ngIf="attachments?.tasks?.length"
      headerLabel="{{'FRMELEMNTS_LBL_TASK_LEVEL' | translate}} {{'FRMELEMNTS_LBL_EVIDENCE' | translate | lowercase}}"
      class="header">
    </app-item-list-header>
    <div *ngIf="attachments?.tasks?.length">
      <app-attachment-card *ngFor="let task of attachments?.tasks" [data]="task" [viewOnly]="viewOnly"
        (deleteAttachment)="deleteImage($event)">
      </app-attachment-card>
    </div>
  </div>

  <div *ngIf="type != 'image/jpeg'">
    <div *ngIf="attachments?.project?.attachments?.length">
      <app-item-list-header
        headerLabel="{{'FRMELEMNTS_LBL_PROJECT_LEVEL' | translate}} {{'FRMELEMNTS_LBL_EVIDENCE' | translate | lowercase}}"
        class="header">
      </app-item-list-header>
        <ion-card class="attachments-card" *ngIf="project?.attachments?.length">
          <ion-card-header class="project-card _capitalize">
            {{attachments?.project?.title}}
          </ion-card-header>
          <ion-card-content>
            <ion-list *ngFor="let attachment of attachments?.project?.attachments; let i = index" (click)="viewDocument(attachment)"
              class="attachment-list">
              <h5>
                <ion-icon class="prefix-attachment" *ngIf="type == 'application/pdf'" name="document" slot="start">
                </ion-icon>
                <ion-icon class="prefix-attachment" *ngIf="type == 'link'" name="link-outline" slot="start"></ion-icon>
                <span>{{attachment.name}} </span>
              </h5>
              <button slot="icon-only" *ngIf="!viewOnly" (click)="deleteConfirmation(project.attachments,i)">
                <ion-icon name="close-circle" slot="end"></ion-icon>
                <p class="card-text">{{'REMOVE_ACTIVITY'| translate}}
                </p>
              </button>
            </ion-list>
          </ion-card-content>
        </ion-card>
    </div>
    <app-item-list-header *ngIf="attachments?.tasks?.length"
      headerLabel="{{'FRMELEMNTS_LBL_TASK_LEVEL' | translate}} {{'FRMELEMNTS_LBL_EVIDENCE' | translate | lowercase}}"
      class="header">
    </app-item-list-header>
    <div *ngFor="let task of attachments?.tasks">
      <ion-card class="attachments-card" *ngIf="task?.attachments?.length">
        <ion-card-header class="project-card _capitalize">
          {{task.title}}
        </ion-card-header>
        <ion-card-content>
          <ion-list *ngFor="let attachment of task.attachments; let i = index" (click)="viewDocument(attachment)"
            class="attachment-list">
            <h5>
              <ion-icon class="prefix-attachment" *ngIf="type == 'application/pdf'" name="document" slot="start">
              </ion-icon>
              <ion-icon class="prefix-attachment" *ngIf="type == 'link'" name="link-outline" slot="start"></ion-icon>
              <span>{{attachment.name}} </span>
            </h5>
            <button slot="icon-only" *ngIf="!viewOnly" (click)="deleteConfirmation(task.attachments,i)">
              <ion-icon name="close-circle" slot="end"></ion-icon>
              <p class="card-text">{{'REMOVE_ACTIVITY'| translate}}
              </p>
            </button>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
  <div *ngIf="!attachments?.project?.length && !attachments?.tasks?.length">
    <app-no-data></app-no-data>
  </div>
</ion-content>